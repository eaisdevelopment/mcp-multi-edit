---
phase: 11-publishing
plan: 02
type: execute
wave: 1
depends_on: []
files_modified:
  - README.md
autonomous: true

must_haves:
  truths:
    - "README shows @essentialai/mcp-multi-edit as the package name"
    - "README has Quick Start section for Claude Code with .mcp.json config"
    - "README has Quick Start section for Claude Desktop"
    - "README has npx usage instructions"
    - "README has detailed multi_edit examples (basic, dry-run, replace_all, error handling)"
    - "README has detailed multi_edit_files examples (basic, multi-file, error/rollback)"
    - "README has shields.io badges for npm version, license, build, coverage"
    - "README references PolyForm Noncommercial license (not MIT)"
  artifacts:
    - path: "README.md"
      provides: "Complete package documentation for Claude Code users"
      min_lines: 200
  key_links:
    - from: "README.md"
      to: "package.json"
      via: "package name and install commands"
      pattern: "@essentialai/mcp-multi-edit"
---

<objective>
Rewrite README.md as comprehensive documentation targeting Claude Code users with detailed tool examples.

Purpose: The README is the primary documentation and npm landing page. It must clearly communicate setup, features, and usage for the Claude Code audience.
Output: Complete README.md rewrite
</objective>

<execution_context>
@/Users/dev/.claude/get-shit-done/workflows/execute-plan.md
@/Users/dev/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/11-publishing/11-CONTEXT.md
@.planning/phases/11-publishing/11-RESEARCH.md
@README.md
@src/server.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Rewrite README.md for Claude Code audience</name>
  <files>README.md</files>
  <action>
Replace the entire README.md with a comprehensive document. Use the package name `@essentialai/mcp-multi-edit` throughout (per user decision, NOT @anthropic-community).

Structure the README with these sections in this order:

**1. Title and Badges**
- Title: `# @essentialai/mcp-multi-edit`
- Badges using shields.io (on one line, space-separated):
  - npm version: `[![npm version](https://img.shields.io/npm/v/@essentialai/mcp-multi-edit)](https://www.npmjs.com/package/@essentialai/mcp-multi-edit)`
  - license: `[![license](https://img.shields.io/npm/l/@essentialai/mcp-multi-edit)](./LICENSE)`
  - build status: `[![build](https://img.shields.io/github/actions/workflow/status/eaisdevelopment/mcp-multi-edit/ci.yml?branch=main)](https://github.com/eaisdevelopment/mcp-multi-edit/actions)`
  - coverage: `[![coverage](https://img.shields.io/badge/coverage-90%25%2B-brightgreen)](./README.md)`

**2. One-line description**
"MCP server providing atomic multi-edit capabilities for Claude Code and Claude Desktop. Perform multiple find-and-replace operations in a single tool call with guaranteed atomicity -- all edits succeed or none apply."

**3. Quick Start (Claude Code)** -- primary audience section
- Subsection: "Using .mcp.json (recommended)" -- show the JSON config with npx
  ```json
  {
    "mcpServers": {
      "multi-edit": {
        "command": "npx",
        "args": ["-y", "@essentialai/mcp-multi-edit"]
      }
    }
  }
  ```
- Subsection: "Using CLI" -- show the `claude mcp add` command
  ```bash
  claude mcp add --transport stdio multi-edit -- npx -y @essentialai/mcp-multi-edit
  ```

**4. Quick Start (Claude Desktop)**
- Show claude_desktop_config.json with same npx pattern
- Note platform-specific config paths (macOS: ~/Library/Application Support/Claude/, Windows: %APPDATA%/Claude/)

**5. Features**
- Bullet list: Atomic operations, Dry-run preview, Automatic backups, Multi-file coordination with rollback, Structured error responses with recovery hints, Conflict detection, Path validation

**6. Tools**

**6a. multi_edit** subsection:
- Brief description
- Parameters table (file_path, edits, edits[].old_string, edits[].new_string, edits[].replace_all, dry_run, backup, include_content)
- Example: Basic usage (rename variable)
- Example: Dry-run preview (same edit but dry_run: true, show expected response with diff)
- Example: Replace all occurrences (replace_all: true with multiple matches)
- Example: Error handling (show what response looks like when old_string not found, including error_code and recovery_hint)

**6b. multi_edit_files** subsection:
- Brief description (coordinated atomic edits across multiple files)
- Parameters table (files, files[].file_path, files[].edits, dry_run, include_content)
- Example: Rename across files (same variable in 3 files)
- Example: Multi-file with rollback explanation (note that if any file fails, all are rolled back)
- Example: Error response for multi-file (one file fails, all rolled back)

**7. Error Handling**
- Explain the ErrorEnvelope structure: error_code, message, recovery_hint, retryable
- List key error codes: MATCH_NOT_FOUND, AMBIGUOUS_MATCH, VALIDATION_ERROR, FILE_NOT_FOUND, PERMISSION_ERROR
- Explain that retryable=true means Claude can fix and retry

**8. Development**
- Build commands: npm install, npm run build, npm run test, npm run test:coverage, npm run dev
- Brief project structure overview

**9. License**
- "This project is licensed under the [PolyForm Noncommercial License 1.0.0](./LICENSE)."
- "Free for personal use. For commercial licensing inquiries, contact support@essentialai.uk."
- Do NOT mention MIT anywhere

All JSON examples should be realistic and self-contained. Use absolute paths in examples (e.g., /home/user/project/src/app.ts). Show both input and expected response for key examples.
  </action>
  <verify>
Verify README.md contains required sections: `grep -c "Quick Start" README.md` returns >= 2. `grep -c "@essentialai/mcp-multi-edit" README.md` returns >= 5. `grep -c "multi_edit_files" README.md` returns >= 3. `grep -c "PolyForm" README.md` returns >= 1. `grep -c "MIT" README.md` returns 0. Word count with `wc -l README.md` should be >= 200 lines.
  </verify>
  <done>README.md is a comprehensive document targeting Claude Code users. Contains Quick Start for both Claude Code and Claude Desktop, detailed tool documentation with multiple examples per tool, error handling documentation, shields.io badges, and PolyForm Noncommercial license reference. No MIT references remain.</done>
</task>

<task type="auto">
  <name>Task 2: Verify package distribution contents</name>
  <files>package.json</files>
  <action>
Run `npm pack --dry-run` to verify the published package would contain exactly the right files. The output should show ONLY:
- dist/ files (compiled JS, .d.ts declarations, .js.map source maps, .d.ts.map declaration maps)
- src/ files (TypeScript source)
- LICENSE
- CHANGELOG.md
- README.md (auto-included)
- package.json (auto-included)

It should NOT include: tests/, .planning/, .idea/, node_modules/, vitest.config.ts, tsconfig.json, .mcp.json, .gitignore, CLAUDE.md, or any other config files.

If the `files` field in package.json is correctly set from Plan 01 (which runs in parallel), this task validates it. If Plan 01 has not run yet, verify the files field exists in package.json and note in output. The key validation is that `npm pack --dry-run` shows only expected files.

Also run `npm run build` followed by `npm run test` to ensure everything still works as a final sanity check.
  </action>
  <verify>
`npm pack --dry-run 2>&1 | grep -c ".planning"` returns 0 (no planning files). `npm pack --dry-run 2>&1 | grep -c "tests/"` returns 0 (no test files). `npm pack --dry-run 2>&1 | grep -c "dist/"` returns > 0 (compiled output included). `npm run build && npm run test` succeeds.
  </verify>
  <done>npm pack --dry-run confirms package contains only dist/, src/, LICENSE, CHANGELOG.md, README.md, and package.json. No test files, planning files, or config files leak into the published package. Build and tests pass.</done>
</task>

</tasks>

<verification>
1. README.md is >= 200 lines with all required sections
2. README references @essentialai/mcp-multi-edit throughout (never @anthropic-community)
3. README has Claude Code .mcp.json setup as primary quick start
4. README has multiple examples per tool (basic, dry-run, replace_all, error)
5. README references PolyForm Noncommercial license (not MIT)
6. npm pack --dry-run shows clean package contents
</verification>

<success_criteria>
- README.md completely rewritten for Claude Code audience
- All tool parameters documented with realistic examples
- Quick Start sections for both Claude Code and Claude Desktop
- Badges present using shields.io
- Package distribution verified clean via npm pack --dry-run
- No references to @anthropic-community or MIT license remain
</success_criteria>

<output>
After completion, create `.planning/phases/11-publishing/11-02-SUMMARY.md`
</output>
